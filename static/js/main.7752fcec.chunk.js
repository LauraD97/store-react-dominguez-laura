(this["webpackJsonpstore-dominguez-laura"]=this["webpackJsonpstore-dominguez-laura"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/coin.3ed58189.svg"},,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/user.b0e62303.svg"},,,function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/aerolab_logo.452e765c.png"},function(e,t,a){e.exports=a.p+"static/media/shopping.c859a6de.svg"},function(e,t,a){e.exports=a.p+"static/media/product.55b31083.svg"},,function(e,t,a){e.exports=a.p+"static/media/cover.56df08e2.png"},function(e,t,a){e.exports=a.p+"static/media/first.3af2b989.svg"},function(e,t,a){e.exports=a.p+"static/media/previous.5864da1d.svg"},function(e,t,a){e.exports=a.p+"static/media/next.4965e3e4.svg"},function(e,t,a){e.exports=a.p+"static/media/last.73cee714.svg"},function(e,t,a){e.exports=a.p+"static/media/blue-bag.38f00962.svg"},function(e,t,a){e.exports=a.p+"static/media/white-bag.9133482b.svg"},function(e,t,a){e.exports=a.p+"static/media/message.9734d752.svg"},function(e,t,a){e.exports=a(58)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(14),l=a.n(r),o=a(2),s=a(10),i=a(11),m=a.n(i),u=a(7),d=a(16),p="https://coding-challenge-api.aerolab.co",E="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjcwYmQ0ZjBlMzM1MDAwMTg1YjQ3NDMiLCJpYXQiOjE2MDEyMjQwMTV9.WUPv_DSAdl33JMzmUtbCwjzJ_99C8f4Y45xK9YFzIGE",f={profile:{id:"profile",path:"/user/me",method:"GET"},products:{id:"products",path:"/products",method:"GET"},history:{id:"history",path:"/user/history",method:"GET"},redeem:{id:"redeem",path:"/redeem",method:"POST"},points:{id:"points",path:"/user/points",method:"POST"}};function g(e){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(m.a.mark((function e(t){var a,n,c,r,l,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,n=a.path,c=a.method,r=t.body,l={method:c,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(E)}},"POST"===c&&(l=Object(u.a)(Object(u.a)({},l),{},{body:JSON.stringify(r)})),e.next=5,fetch(p+n,l);case 5:return o=e.sent,e.next=8,o.json();case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b={lowest:"Lowest price",highest:"Highest price"},h={id:"Any category",options:[]},N={id:"Any price",options:["0 - 500","501 - 1000","1001 - 1500","1501 - 2000","2001 - 2500"]},j=[1e3,5e3,7500],O={name:"",points:0},y=c.a.createContext();function x(e){var t=e.children,a=Object(n.useState)(O),r=Object(o.a)(a,2),l=r[0],s=r[1];return c.a.createElement(y.Provider,{value:{user:l,setUser:s}},t)}a(45);var C=document.getElementById("modal-root"),S=function(e){var t=document.createElement("div");return Object(n.useEffect)((function(){return C.appendChild(t),function(){C.removeChild(t)}}),[t]),Object(r.createPortal)(c.a.createElement("div",null,e.children),t)},w=a(8),k=a.n(w),M=(a(46),function(){var e=Object(n.useContext)(y),t=e.user,a=e.setUser,r=Object(n.useState)(j[0]),l=Object(o.a)(r,2),s=l[0],i=l[1],m=Object(n.useState)("Add points to your account"),d=Object(o.a)(m,2),p=d[0],E=d[1],v=Object(n.useRef)(!0);return Object(n.useEffect)((function(){return function(){v.current=!1}}),[]),c.a.createElement("div",{className:"col-md-12 points-container"},c.a.createElement("h1",{className:"col-md-12"},"Add points"),c.a.createElement("div",{className:"col-md-12 buttons-container"},j.map((function(e){return c.a.createElement("button",{key:e,className:s===e?"button-active points-button col-md-4":"button points-button col-md-4",onClick:function(){return i(e)}},c.a.createElement("img",{className:"coin-icon",src:k.a,alt:"coin"}),c.a.createElement("p",null,e))}))),c.a.createElement("div",{className:"col-md-12 add-container"},c.a.createElement("button",{className:"col-md-3 offset-md-1",onClick:function(){g({data:f.points,body:{amount:s}}).then((function(e){a(Object(u.a)(Object(u.a)({},t),{},{points:e["New Points"]})),v.current&&E(e.message)})).catch(v.current&&E("Oh! Something went wrong"))}},"Let's do it!"),c.a.createElement("h3",{className:"col-md-7"},p)))}),P=a(27),z=a.n(P),I=a(28),F=a.n(I),J=a(29),T=a.n(J),B=a(17),Y=a.n(B),U=(a(47),function(e){var t=e.setShowModal,a=e.showModal,r=Object(n.useContext)(y),l=r.user,o=l.name,s=l.points,i=r.setUser;return Object(n.useEffect)((function(){g({data:f.profile}).then((function(e){return i(e)}))}),[i]),c.a.createElement("div",{className:"col-md-4  offset-md-1 user-info"},c.a.createElement("button",{className:"user-points",onClick:function(){return t(!a)}},c.a.createElement("img",{className:"info-icon",src:k.a,alt:"coin"}),c.a.createElement("p",null,s," points")),c.a.createElement("p",{className:""},o),c.a.createElement("img",{className:"info-icon",src:Y.a,alt:"coin"}))}),A=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{className:"col-md-12 nav-container np"},c.a.createElement("div",{className:"col-md-2 np"},c.a.createElement("img",{className:"logo",src:z.a,alt:"Logo"})),c.a.createElement("ul",{className:"col-md-4 offset-md-1 links"},c.a.createElement("li",null,c.a.createElement("img",{className:"info-icon",src:F.a,alt:"Logo"}),c.a.createElement(s.b,{className:"link",to:"/store-react-dominguez-laura/history"},"Shopping history")),c.a.createElement("li",null,c.a.createElement("img",{className:"nav-icon",src:T.a,alt:"Logo"}),c.a.createElement(s.b,{className:"link",to:"/store-react-dominguez-laura/"},"Products"))),c.a.createElement(U,{setShowModal:r,showModal:a}),a&&c.a.createElement(S,null,c.a.createElement("div",{className:"modal-container"},c.a.createElement("div",{className:"modal-card"},c.a.createElement("button",{className:"modal-close",onClick:function(){return r(!a)}},"x"),c.a.createElement("div",{className:"modal-profile"},c.a.createElement(M,null))))))},D=(a(53),a(31)),L=a.n(D),G=function(){return c.a.createElement("div",{className:"col-md-12 np"},c.a.createElement("div",{className:"col-md-12 bar"}),c.a.createElement("div",{className:"col-md-12 header np"},c.a.createElement("img",{src:L.a,alt:"cover page"}),c.a.createElement("h1",null,"Reward Store")),c.a.createElement("div",{className:"col-md-12 bar"}))},Q=a(1),R=(a(20),function(e){var t=e.setSortBy,a=e.jump,r=Object(n.useState)(""),l=Object(o.a)(r,2),s=l[0],i=l[1];return c.a.createElement("div",{className:"col-md-4 sort-bar"},c.a.createElement("p",{className:"margin-p"},"Sort by:"),Object.entries(b).map((function(e){return c.a.createElement("button",{key:e[1],className:s===e[1]?"button-active":"button",onClick:function(){return n=e[1],i(n),t(n),void a(1);var n}},e[1])})))}),_=a(18),H=function(e){var t=e.handleFilterChange,a=e.id,r=e.options,l=e.jump,s=Object(n.useState)(""),i=Object(o.a)(s,2),m=i[0],u=i[1];r=[a].concat(Object(_.a)(r));return c.a.createElement("div",{className:"filter"},c.a.createElement("select",{className:"select-margin","data-testid":"selectOption",onChange:function(e){return a=e.target.value,u(a),t(a),void l(1);var a},value:m},r.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))))},V=function(e){var t=e.products,a=e.setCategoryFilter,n=e.setPriceFilter,r=e.jump,l=Object(_.a)(t).map((function(e){return e.category})),o=Object(u.a)(Object(u.a)({},h),{},{options:l.filter((function(e,t){return l.indexOf(e)===t}))});return c.a.createElement("div",{className:"col-md-5 f filter-bar"},c.a.createElement("p",{className:"margin-p"},"Filter by: "),c.a.createElement(H,Object.assign({},o,{handleFilterChange:a,jump:r})),c.a.createElement(H,Object.assign({},N,{handleFilterChange:n,jump:r})))};var W=function(e,t){var a=Object(n.useState)(1),c=Object(o.a)(a,2),r=c[0],l=c[1],s=Math.ceil(e.length/t);return{next:function(){l((function(e){return Math.min(e+1,s)}))},prev:function(){l((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);l((function(e){return Math.max(Math.min(t,s),1)}))},currentData:function(){var a=(r-1)*t,n=a+t;return e.slice(a,n)},currentPage:r,maxPage:s}},X=a(32),Z=a.n(X),K=a(33),q=a.n(K),$=a(34),ee=a.n($),te=a(35),ae=a.n(te),ne=(a(54),function(e){var t=e.currentPage,a=e.jump,n=e.prev,r=e.next,l=e.maxPage;return c.a.createElement("div",{className:"pagination col-md-3"},c.a.createElement("button",{className:"pg-btn p",onClick:function(){return a(1)}},c.a.createElement("span",null,c.a.createElement("img",{className:"pg-icon",src:Z.a,alt:"Start"}))),c.a.createElement("button",{className:"pg-btn p",onClick:function(){return n()}},c.a.createElement("span",null,c.a.createElement("img",{className:"pg-icon2",src:q.a,alt:"Previous"}))),c.a.createElement("p",{className:"pagination-text"},16*t," of ",16*l," products"),c.a.createElement("button",{className:"pg-btn p",onClick:function(){return r()}},c.a.createElement("span",null,c.a.createElement("img",{className:"pg-icon2",src:ee.a,alt:"next"}))),c.a.createElement("button",{className:"pg-btn p",onClick:function(){return a(l)}},c.a.createElement("span",null,c.a.createElement("img",{className:"pg-icon",src:ae.a,alt:"end"}))))}),ce=function(e){var t=e.info.id,a=e.render,r=Object(n.useState)([]),l=Object(o.a)(r,2),s=l[0],i=l[1],p=Object(n.useState)(N.id),E=Object(o.a)(p,2),v=E[0],j=E[1],O=Object(n.useState)(h.id),y=Object(o.a)(O,2),x=y[0],C=y[1],S=Object(n.useState)(""),w=Object(o.a)(S,2),k=w[0],M=w[1];Object(n.useEffect)((function(){Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,g({data:f[t]});case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t]);var P=s.filter((function(e){return(x===h.id||e.category===x)&&(v===N.id||e.cost>parseInt(v.split("-")[0])&&e.cost<=parseInt(v.split("-")[1]))})).sort((function(e,t){return k===b.lowest?e.cost-t.cost:t.cost-e.cost})),z=W(P,16),I=z.next,F=z.prev,J=z.jump,T=z.currentData,B=z.currentPage,Y=z.maxPage;return c.a.createElement("div",{className:"col-md-12 np"},c.a.createElement("div",{className:"col-md-12 np f"},c.a.createElement(R,{setSortBy:M,jump:J}),c.a.createElement(V,{products:s,setCategoryFilter:C,setPriceFilter:j,jump:J}),c.a.createElement(ne,{currentPage:B,jump:J,prev:F,next:I,maxPage:Y})),c.a.createElement("div",{className:"col-md-12 grid np"},T().map((function(e){return c.a.createElement(n.Fragment,{key:Math.random()},a(Object(u.a)({},e)))}))))},re=(a(55),a(25),function(e){var t=e.info,a=e.render,r=Object(n.useContext)(y).user,l=r.name,o=r.points,s=r.createDate,i=void 0===s?"":s;return c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"col-md-12 user-info"},c.a.createElement("div",{className:"col-md-5 user-container"},c.a.createElement("div",{className:"name-info"},c.a.createElement("img",{className:"user-icon",src:Y.a,alt:"coin"}),c.a.createElement("h1",null,l)),c.a.createElement("h2",null,"Points available: ",o),c.a.createElement("p",null,"Count created on: ",i.substr(0,10))),c.a.createElement("div",{className:"col-md-7"},c.a.createElement(M,null))),c.a.createElement("div",{className:"col-md-12 bar2"}),c.a.createElement("h1",{className:"col-md-12 title"},"BUY HISTORY"),c.a.createElement(ce,{info:t,render:a}))}),le=a(36),oe=a.n(le),se=a(37),ie=a.n(se),me=a(38),ue=a.n(me),de=function(e){var t=e._id,a=e.name,r=e.cost,l=e.category,s=e.img.url,i=Object(n.useContext)(y),m=i.user,u=i.setUser,d=Object(n.useState)(!1),p=Object(o.a)(d,2),E=p[0],v=p[1],b=Object(n.useState)(""),h=Object(o.a)(b,2),N=h[0],j=h[1],O=m.points-r;return c.a.createElement("div",{className:"card"},O>0?c.a.createElement("img",{className:"icon buy-icon-size",src:oe.a,alt:"Buy Icon"}):c.a.createElement("div",{className:"icon"},c.a.createElement("div",{className:"need"},c.a.createElement("p",null," You need ",-O),c.a.createElement("img",{className:"icon-size",src:k.a,alt:"Coin"}))),c.a.createElement("img",{className:"product",src:s,alt:"Product"}),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"line"}),c.a.createElement("p",null,l),c.a.createElement("h3",null,a),c.a.createElement("div",{className:"points"},c.a.createElement("img",{className:"coin-icon-size",src:k.a,alt:"Coin"}),c.a.createElement("p",null,r))),O>0&&c.a.createElement("div",{className:"card-hover"},c.a.createElement("img",{className:"icon buy-icon-size",src:ie.a,alt:"Buy Icon"}),c.a.createElement("div",{className:"buy-info"},c.a.createElement("div",{className:"redeem-points"},c.a.createElement("p",null,r),c.a.createElement("img",{className:"coin-icon-size",src:k.a,alt:"Coin"})),c.a.createElement("button",{onClick:function(){g({data:f.redeem,body:{productId:t}}).then((function(e){v(!0),"You've redeem the product successfully"===e.message?j(e.message):j("Oh no, something went wrong!"),g({data:f.profile}).then((function(e){return u(e)}))})).catch((function(){v(!0),j("Oh no, something went wrong!")}))}},"Redeem now"))),E&&c.a.createElement(S,{setShowModal:v,showModal:E},c.a.createElement("div",{className:"modal-container"},c.a.createElement("div",{className:"modal-card"},c.a.createElement("button",{className:"modal-close",onClick:function(){return v(!E)}},"x"),c.a.createElement("div",{className:"modal-confirmation"},c.a.createElement("img",{className:"modal-icon",src:ue.a,alt:"Coin"}),c.a.createElement("h1",null,N))))))},pe=(a(26),function(e){e._id;var t=e.name,a=e.cost,n=e.category,r=e.img.url;return c.a.createElement("div",{className:"history-card"},c.a.createElement("img",{src:r,alt:"Product"}),c.a.createElement("div",{className:"info-container"},c.a.createElement("p",null,n),c.a.createElement("h3",null,t),c.a.createElement("div",{className:"card-points"},c.a.createElement("img",{src:k.a,alt:"Coin"}),c.a.createElement("p",null,a))))}),Ee=(a(56),function(){return c.a.createElement(Q.c,null,c.a.createElement(Q.a,{exact:!0,path:"/store-react-dominguez-laura/",render:function(){return c.a.createElement(ce,{info:f.products,render:function(e){return c.a.createElement(de,e)}})}}),c.a.createElement(Q.a,{exact:!0,path:"/store-react-dominguez-laura/history",render:function(){return c.a.createElement(re,{info:f.history,render:function(e){return c.a.createElement(pe,e)}})}}))});a(57);var fe=function(){return c.a.createElement("div",{className:"container"},c.a.createElement(x,null,c.a.createElement(A,null),c.a.createElement(G,null),c.a.createElement(Ee,null)))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,null,c.a.createElement(fe,null))),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.7752fcec.chunk.js.map